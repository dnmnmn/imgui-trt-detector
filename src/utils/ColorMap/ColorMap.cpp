//
// Created by Dongmin on 24. 8. 7.
//

#include "ColorMap.h"

ColorMap::ColorMap() {
    custom_map_ = cv::Mat(256, 1, CV_8UC3);
    std::vector<std::vector<int>> temp = {
    //         0: (250, 220, 125),    # 0 도우
        {250, 220, 125},
    // 1: (175, 60, 60),      # 1 토마토 소스
        {175, 60, 60,},
    // 2: (230, 205, 130),    # 2 모짜렐라 치즈
        {230, 205, 130},
    // 3: (150, 40, 10),      # 3 페퍼로니
        {150, 40, 10},
    // 4: (95, 115, 80),      # 4 바질오일
        {95, 115, 80},
    // 5: (220, 15, 15),      # 5 마리네이트 토마토
        {220, 15, 15},
    // 6: (240, 230, 230),    # 6 마요네즈
        {240, 230, 230},
    // 7: (155, 170, 150),    # 7 고르곤 졸라
        {155, 170, 150},
    // 8: (235, 210, 15),     # 8 고구마 무스
        {235, 210, 15},
    // 9: (230, 235, 230),    # 9 양파
        {230, 235, 230},
    // 10: (210, 210, 40),     # 10 스위트콘
        {210, 210, 40},
    // 11: (150, 150, 60),     # 11 베터바이트
    // 12: (195, 110, 205),    # 12 베이컨
    // 13: (110, 80, 55),      # 13 불고기 그라이딩
    // 14: (185, 95, 55),      # 14 미트 소스
    // 15: (155, 115, 100),    # 15 오뗄 포크토핑
    // 16: (90, 45, 25),       # 16 구운 양파 소스
    // 17: (250, 180, 30),     # 17 레드 체자 치즈
    // 18: (230, 215, 115),    # 18 콘소메 소스
    // 19: (210, 200, 150),    # 19 표고 버섯
    // 20: (75, 60, 40),       # 20 불고기
    // 21: (50, 185, 70),      # 21 청피망
    // 22: (15, 15, 15),       # 22 블랙올리브
    // 23: (210, 200, 105),    # 23 잡화청
    // 24: (240, 235, 135),    # 24 콘소메 시즈닝
    // 25: (230, 145, 60),     # 25 스리라차 앤 마요
    // 26: (220, 170, 110),    # 26 스리라차 앤 마요 앤 마요
    // 27: (215, 230, 35),     # 27 파인애플
    // 28: (230, 235, 190),    # 28 크림치즈
    // 29: (220, 70, 40),      # 29 케이준 스파이시
    // 30: (100, 175, 120),    # 30 와사비
    // 31: (140, 175, 150),    # 31 와사비 앤 마요
    // 32: (50, 225, 45),      # 32 대파
    // 33: (220, 225, 130),    # 33 메쉬 포테이토
    // 34: (60, 20, 15),       # 34 비프스트립
    // 35: (65, 35, 30),       # 35 잭다니엘 소스
    // 36: (100, 65, 60),      # 36 잭다니엘 소스 & 마요
    // 37: (195, 160, 65),     # 37 팝콘치킨
    // 38: (210, 210, 40),     # 38 컷팅콘
    // 39: (200, 80, 40),      # 39 레드커리소스
    // 40: (215, 165, 145),    # 40 시즈닝 새우
    // 41: (220, 200, 170),    # 41 갈릭치즈소스
    // 42: (215, 165, 145),    # 42 마리네이드 새우
    // 43: (215, 165, 145),    # 43 자숙 새우
    // 44: (230, 225, 210),    # 44 치즈소스
    // 45: (190, 35, 20),      # 45 고추장 칠리 소스
    // 46: (200, 40, 30),      # 46 고추장 칠리 & 마요
    // 47: (100, 135, 30),     # 47 할리피뇨
        {150, 150, 60},
        {195, 110, 205},
        {110, 80, 55},
        {185, 95, 55},
        {155, 115, 100},
        {90, 45, 25},
        {250, 180, 30},
        {230, 215, 115},
        {210, 200, 150},
        {75, 60, 40},
        {50, 185, 70},
        {15, 15, 15},
        {210, 200, 105},
        {240, 235, 135},
        {230, 145, 60},
        {220, 170, 110},
        {215, 230, 35},
        {230, 235, 190},
        {220, 70, 40},
        {100, 175, 120},
        {140, 175, 150},
        {50, 225, 45},
        {220, 225, 130},
        {60, 20, 15},
        {65, 35, 30},
        {100, 65, 60},
        {195, 160, 65},
        {210, 210, 40},
        {200, 80, 40},
        {215, 165, 145},
        {220, 200, 170},
        {215, 165, 145},
        {215, 165, 145},
        {230, 225, 210},
        {190, 35, 20},
        {200, 40, 30},
        {215, 165, 145},
        {220, 200, 170},
        {215, 165, 145},
        {215, 165, 145},
        {230, 225, 210},
        {190, 35, 20},
        {200, 40, 30},
        {100, 135, 30},

    // 48: (100,35,15),        # 48 양념소스
    // 49: (100, 135, 30),     # 49 파마산 치즈 not label
    // 50: (150,120,75),       # 50 양송이 버섯
    // 51: (135,115,75),       # 51 연유
    // 52: (100,75,45),        # 52 불고기 소스
    // 53: (120,45,5),         # 53 spicy tuna cunk
    // 54: (140,30,5),         # 54 적피망
    // 55: (100, 135, 30),     # 55 트러플 오일 not label
    // 56: (165,150,110),      # 56 크래프트 체다 치즈
        {100, 35, 15},
        {100, 135, 30},
        {150, 120, 75},
        {135, 115, 75},
        {100, 75, 45},
        {120, 45, 5},
        {140, 30, 5},
        {100, 135, 30},
        {165, 150, 110},

    // 57: (140,110,115),      # 57 스모크 햄
    // 58: (110,55,20),        # 58 바베큐 소스
    // 59: (151,123,111),      # 59 스모크 소시지
    // 60: (141,99,28),        # 60 커리 소스
    // 61: (100, 65, 60),      # 61 옐로우 피퍼 - 없어짐.
    // 62: (179,166,129),      # 62 핫 치킨 토핑
    // 63: (68,32,19),         # 63 소이 갈릭 소스
    // 64: (78,35,7),          # 64 삼겹살 목살
    // 65: (208,184,128),      # 65 써우샌드 아일랜드 드레싱
    // 66: (191,110,45),       # 66 게맛살
    // 67: (224,222,206),      # 67 오징어
    // 68: (68,35,12),         # 68 삼겹살 불고기
    // 69: (150,113,52),       # 69 불고기 소스 & 마요
    // 70: (100,75,25),        # 70 슈스트링 후라이
    // 71: (190,185,150),      # 71 갈릭 치즈 & 마요
    // 72: (140,120,50),       # 72 스위트 포테이토 큐브
    // 73: (130,95,85),        # 73 소시지
    // 74: (195, 110, 205),    # 74 햄
    // 75: (195, 160, 65),     # 75 양념 치킨 팝콘
        {140, 110, 115},
        {110, 55,20},
        {151,123,111},
        {141,99,28},
        {100, 65, 60},
        {179,166,129},
        {68,32,19},
        {78,35,7},
        {208,184,128},
        {191,110,45},
        {224,222,206},
        {68,35,12},
        {150,113,52},
        {100,75,25},
        {190,185,150},
        {140,120,50},
        {130,95,85},
        {195, 110, 205},
        {195, 160, 65},
    //
    // 100: (175, 60, 60),     # red sauce 통합
    // 101: (240, 230, 230),   # white sauce 통합
    // 102: (100, 65, 60),     # brown sacue 통합
    // 103: (95, 115, 80),     # alpha sacue 통합
    // 104: (215, 165, 145),   # 새우 통합

    };
    for(int i =0 ; i < temp.size(); i++)
        custom_map_.at<cv::Vec3b>(i,0) = cv::Vec3b(temp[i][0], temp[i][1], temp[i][2]);
    custom_map_.at<cv::Vec3b>(100,0) = cv::Vec3b(175, 60, 60);
    custom_map_.at<cv::Vec3b>(101,0) = cv::Vec3b(240, 230, 230);
    custom_map_.at<cv::Vec3b>(102,0) = cv::Vec3b(100, 65, 60);
    custom_map_.at<cv::Vec3b>(103,0) = cv::Vec3b(95, 115, 80);
    custom_map_.at<cv::Vec3b>(104,0) = cv::Vec3b(215, 165, 145);
    custom_map_.at<cv::Vec3b>(255,0) = cv::Vec3b(0, 0, 0);

    // RGB to BGR
    for(int i = 0; i < custom_map_.rows; i++)
    {
        cv::Vec3b temp_ = custom_map_.at<cv::Vec3b>(i, 0);
        custom_map_.at<cv::Vec3b>(i, 0) = cv::Vec3b(temp_[2], temp_[1], temp_[0]);
    }
}

cv::Mat ColorMap::GetColorMap(cv::Mat _image) {
    cv::Mat color_map;
    cv::applyColorMap(_image, color_map, custom_map_);
    return color_map;
}

cv::Mat ColorMap::GetColorOverlay(cv::Mat _image, cv::Mat _overlay, float _alpha) {
    cv::Mat color_overlay;
    cv::Mat color_map;
    cv::applyColorMap(_overlay, color_map, custom_map_);
    cv::addWeighted(_image, 1.0 - _alpha, color_map, _alpha, 0.0, color_overlay);
    return color_overlay;
}